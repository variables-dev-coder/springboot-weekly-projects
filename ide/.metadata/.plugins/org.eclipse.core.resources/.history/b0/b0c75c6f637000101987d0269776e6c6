package com.munna.urlshortener.controller;

public class UrlShortenerController {

	import com.munna.urlshortener.service.UrlShortenerService;
	import org.springframework.beans.factory.annotation.Autowired;
	import org.springframework.http.ResponseEntity;
	import org.springframework.web.bind.annotation.*;

	@RestController
	@RequestMapping("/")
	public class UrlShortenerController {

	    @Autowired
	    private UrlShortenerService service;

	    // API to shorten original URL
	    @PostMapping("/shorten")
	    public ResponseEntity<String> shortenUrl(@RequestBody String originalUrl) {
	        String shortUrl = service.shortenUrl(originalUrl);
	        return ResponseEntity.ok(shortUrl);
	    }

	    // API to redirect to original URL
	    @GetMapping("/{shortUrlCode}")
	    public ResponseEntity<?> redirect(@PathVariable String shortUrlCode) {
	        String originalUrl = service.getOriginalUrl(shortUrlCode);
	        if (originalUrl != null) {
	            return ResponseEntity.status(302).header("Location", originalUrl).build();
	        } else {
	            return ResponseEntity.notFound().build();
	        }
	    }
	}
